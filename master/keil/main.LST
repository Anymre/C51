C51 COMPILER V9.52.0.0   MAIN                                                              03/20/2019 16:19:28 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include <reg51.h>      //头文件
   2          
   3          
   4          //倒计时
   5          unsigned char buf[4];       //秒显示的变量
   6          unsigned int EW_time_default = 20;      //东西默认值
   7          unsigned int SN_time_default = 30;      //南北默认值
   8          unsigned int EW_time_now = 20;    //东西方向当前数秒
   9          unsigned int SN_time_now = 30;    //南北方向当前数秒
  10          
  11          //字型码
  12          char code LED[] = {0xc0, 0xf9, 0xa4, 0xb0, 0x99, 0x92, 0x82, 0xf8, 0x80, 0x90};
  13          
  14          //红绿灯
  15          sbit Green_EW = P2 ^ 1;   //东西
  16          sbit Yellow_EW = P2 ^ 2;
  17          sbit Red_EW = P2 ^ 3;
  18          
  19          sbit Red_SN = P2 ^ 6;   //南北
  20          sbit Yellow_SN = P2 ^ 5;
  21          sbit Green_SN = P2 ^ 4;
  22          
  23          //函数声明
  24          void delay(int ms);     //延时
  25          void display();       //显示倒计时
  26          void init();          //开机初始化
  27          
  28          void main() {
  29   1        init();
  30   1        while (1) {
  31   2          display();
  32   2        }
  33   1      }
  34          
  35          void init() {
  36   1        //定时器1
  37   1        
  38   1      }
  39          
  40          void display() //显示子程序
  41          {
  42   1        //南北方向个位十位
  43   1        buf[1] = SN_time_now / 10;
  44   1        buf[2] = SN_time_now % 10;
  45   1        //东西方向个位十位
  46   1        buf[3] = EW_time_now / 10;
  47   1        buf[4] = EW_time_now % 10;
  48   1      
  49   1        //点亮南北方向倒计时
  50   1        P1 = 0x01;              //片选LED1
  51   1        P0 = LED[buf[1]];     //送南北时间十位的数码管编码    
  52   1        delay(1);       //延时
  53   1      
  54   1        P1 = 0x02;              //片选LED2
  55   1        P0 = LED[buf[2]];
C51 COMPILER V9.52.0.0   MAIN                                                              03/20/2019 16:19:28 PAGE 2   

  56   1        delay(1);
  57   1      
  58   1        P1 = 0X04;          //片选LED3
  59   1        P0 = LED[buf[3]];       //送东西时间十位的数码管编码
  60   1        delay(1);       //延时
  61   1      
  62   1        P1 = 0X08;        //片选LED4  
  63   1        P0 = LED[buf[4]];
  64   1        delay(1);
  65   1      }
  66          
  67          void delay(int ms)      //延时子程序
  68              {
  69   1        unsigned int j, k;
  70   1        for (j = 0; j < ms; j++)
  71   1          for (k = 0; k < 124; k++)
  72   1            ;
  73   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    145    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     12    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
